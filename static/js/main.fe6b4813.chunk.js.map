{"version":3,"sources":["components/ImageGallery/ImageGallery.module.css","App.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/Loader/Loader.module.css","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/Button/Button.jsx","services/images-api.jsx","components/Loader/Loader.jsx","components/ImageGallery/ImageGallery.jsx","components/Modal/Modal.jsx","App.jsx","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","imageName","handleNameChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","reset","toast","error","className","s","SearchForm","this","type","autoComplete","autoFocus","name","placeholder","onChange","React","Component","ImageGalleryItem","webformatURL","toggleModal","largeImageURL","src","alt","onClick","Button","onLoadMore","fetchImages","page","url","fetch","then","res","ok","json","Promise","reject","Error","hits","length","LoaderImg","LoaderBox","color","height","width","timeout","ImageGallery","images","status","loadMoreBtn","showBtn","prevState","prevProps","prevImageName","nextImageName","catch","window","scrollTo","top","document","documentElement","scrollHeight","behavior","text","Loader","message","map","image","index","modalRoot","querySelector","Modal","handleKeyDown","e","code","onClose","hadleBackDropClick","target","addEventListener","removeEventListener","createPortal","Overlay","children","App","showModal","formSubmitHandler","autoClose","theme","modalImage","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fe6b4813.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__DncjJ\",\"text\":\"ImageGallery_text__3So6w\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__16ZpL\",\"modalImage\":\"App_modalImage__31ze_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3CvRl\",\"ImageGalleryItem-image\":\"ImageGalleryItem_ImageGalleryItem-image__1C-z-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2AxMb\",\"Modal\":\"Modal_Modal__2WBTT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3R1xi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LoaderBox\":\"Loader_LoaderBox__39sEo\"};","import React from 'react';\nimport { toast } from 'react-toastify';\n\nimport s from './Searchbar.module.css';\n\nclass Searchbar extends React.Component {\n  state = {\n    imageName: '',\n  };\n\n  handleNameChange = event => {\n    this.setState({ imageName: event.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    if (this.state.imageName.trim() === '') {\n      // console.log('Enter image name.');\n      toast.error('Enter image name.');\n      return;\n    }\n\n    // Проп который передается форме для вызова при сабмите\n    this.props.onSubmit(this.state.imageName);\n    // Сбрасываем значение input\n    this.reset();\n  };\n\n  reset = () => {\n    this.setState({ imageName: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s['SearchForm-button']}>\n            <span className={s['SearchForm-button-label']}>Search</span>\n          </button>\n\n          <input\n            className={s['SearchForm-input']}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            name=\"imageName\"\n            value={this.state.imageName}\n            placeholder=\"Search images and photos\"\n            onChange={this.handleNameChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import s from './ImageGalleryItem.module.css';\n\nfunction ImageGalleryItem({ webformatURL, toggleModal, largeImageURL }) {\n  return (\n    <li className={s.ImageGalleryItem}>\n      <img\n        src={webformatURL}\n        alt={webformatURL}\n        onClick={() => toggleModal(largeImageURL)}\n        className={s['ImageGalleryItem-image']}\n      />\n    </li>\n  );\n}\n\nexport default ImageGalleryItem;\n","import s from './Button.module.css';\n\nfunction Button({ onLoadMore }) {\n  return (\n    <button type=\"button\" className={s.Button} onClick={() => onLoadMore()}>\n      Load more\n    </button>\n  );\n}\n\nexport default Button;\n","const API_KEY = '22969928-aad90fecb00099c81964f1030';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nfunction fetchImages(imageName, page) {\n  const url = `${BASE_URL}?key=${API_KEY}&per_page=12&page=${page}&q=${imageName}&image_type=photo`;\n  return fetch(url)\n    .then(res => {\n      // console.log(res);\n      if (res.ok) {\n        return res.json();\n      }\n\n      return Promise.reject(new Error('Something went wrong '));\n    })\n    .then(res => {\n      if (res.hits.length === 0) {\n        return Promise.reject(\n          new Error(\n            'No images with this name were found. Please enter a different name. ',\n          ),\n        );\n      }\n      // console.log(res.hits.length);\n      return res.hits;\n    });\n}\n\nexport default fetchImages;\n","import Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nimport s from './Loader.module.css';\n\nfunction LoaderImg() {\n  return (\n    <div className={s.LoaderBox}>\n      {\n        <Loader\n          type=\"Rings\"\n          color=\"#00BFFF\"\n          height={100}\n          width={100}\n          timeout={3000} //3 secs\n        />\n      }\n      Loading...\n    </div>\n  );\n}\n\nexport default LoaderImg;\n","import React from 'react';\n\nimport s from './ImageGallery.module.css';\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\nimport Button from '../Button/Button';\nimport fetchImages from '../../services/images-api';\nimport LoaderImg from '../Loader/Loader';\n\nclass ImageGallery extends React.Component {\n  state = {\n    images: [],\n    page: 1,\n    status: 'idle',\n    error: null,\n    loadMoreBtn: false,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevImageName = prevProps.imageName;\n    const nextImageName = this.props.imageName;\n\n    if (prevImageName !== nextImageName) {\n      this.setState({ status: 'pending', page: 1, images: [] });\n\n      fetchImages(nextImageName, this.state.page)\n        .then(images => {\n          this.showBtn(images);\n          this.setState({ images, status: 'resolved' });\n        })\n        .catch(error => this.setState({ error, status: 'rejected' }));\n    }\n\n    if (prevState.page !== this.state.page) {\n      this.setState({ status: 'pending' });\n\n      fetchImages(nextImageName, this.state.page)\n        .then(images => {\n          this.showBtn(images);\n          this.setState(prevState => {\n            return {\n              images: [...prevState.images, ...images],\n              status: 'resolved',\n            };\n          });\n        })\n        .then(() => {\n          return window.scrollTo({\n            top: document.documentElement.scrollHeight,\n            behavior: 'smooth',\n          });\n        })\n        .catch(error => this.setState({ error, status: 'rejected' }));\n    }\n  }\n\n  showBtn = images => {\n    images.length < 12\n      ? this.setState({ loadMoreBtn: false })\n      : this.setState({ loadMoreBtn: true });\n  };\n\n  onLoadMore = () => {\n    this.setState(prevState => {\n      return {\n        page: prevState.page + 1,\n      };\n    });\n  };\n\n  render() {\n    const { images, error, status, loadMoreBtn } = this.state;\n\n    if (status === 'idle') {\n      return <div className={s.text}>Enter image name.</div>;\n    }\n\n    if (status === 'pending') {\n      return <LoaderImg />;\n    }\n\n    if (status === 'rejected') {\n      return <div className={s.text}>{error.message}</div>;\n    }\n\n    if (status === 'resolved') {\n      return (\n        <>\n          <ul className={s.ImageGallery}>\n            {images.map((image, index) => (\n              <ImageGalleryItem\n                key={index}\n                webformatURL={image.webformatURL}\n                largeImageURL={image.largeImageURL}\n                toggleModal={this.props.toggleModal}\n              />\n            ))}\n          </ul>\n          {loadMoreBtn && <Button onLoadMore={this.onLoadMore} />}\n        </>\n      );\n    }\n  }\n}\n\nexport default ImageGallery;\n","import React from 'react';\nimport { createPortal } from 'react-dom';\n\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends React.Component {\n  state = {\n    imageName: '',\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    // console.log(e.code);\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  hadleBackDropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.hadleBackDropClick}>\n        <div className={s.Modal}>{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import React from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n// import { v4 as uuidv4 } from 'uuid';\n\nimport s from './App.module.css';\nimport Searchbar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport Modal from './components/Modal/Modal';\n\nclass App extends React.Component {\n  state = {\n    imageName: '',\n    showModal: false,\n    largeImageURL: '',\n  };\n\n  toggleModal = largeImageURL => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n      largeImageURL: largeImageURL,\n    }));\n  };\n\n  formSubmitHandler = imageName => {\n    this.setState({ imageName });\n  };\n\n  render() {\n    return (\n      <div className={s.App}>\n        <Searchbar onSubmit={this.formSubmitHandler} />\n        <ImageGallery\n          imageName={this.state.imageName}\n          toggleModal={this.toggleModal}\n        />\n        <ToastContainer autoClose={3000} theme={'colored'} />\n        {this.state.showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img\n              src={this.state.largeImageURL}\n              alt={this.state.largeImageURL}\n              className={s.modalImage}\n            />\n          </Modal>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import reportWebVitals from './reportWebVitals';\n// ============================================\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__DjWH3\",\"SearchForm\":\"Searchbar_SearchForm__1ac2l\",\"SearchForm-button\":\"Searchbar_SearchForm-button__3u-rY\",\"SearchForm-button-label\":\"Searchbar_SearchForm-button-label__2bzU3\",\"SearchForm-input\":\"Searchbar_SearchForm-input__j6qzO\"};"],"sourceRoot":""}