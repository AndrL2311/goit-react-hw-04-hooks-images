(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{11:function(e,t,a){e.exports={App:"App_App__16ZpL",modalImage:"App_modalImage__31ze_"}},12:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__3CvRl","ImageGalleryItem-image":"ImageGalleryItem_ImageGalleryItem-image__1C-z-"}},13:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2AxMb",Modal:"Modal_Modal__2WBTT"}},15:function(e,t,a){e.exports={Button:"Button_Button__3R1xi"}},17:function(e,t,a){e.exports={LoaderBox:"Loader_LoaderBox__39sEo"}},22:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),o=a.n(c),i=(a(22),a(3)),l=a(8),s=(a(23),a(11)),u=a.n(s),m=a(5),j=a.n(m),b=a(1);var d=function(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(i.a)(a,2),c=r[0],o=r[1],s=function(){o("")};return Object(b.jsx)("header",{className:j.a.Searchbar,children:Object(b.jsxs)("form",{className:j.a.SearchForm,onSubmit:function(e){e.preventDefault(),""!==c.trim()?(t(c),s()):l.b.error("Enter image name.")},children:[Object(b.jsx)("button",{type:"submit",className:j.a["SearchForm-button"],children:Object(b.jsx)("span",{className:j.a["SearchForm-button-label"],children:"Search"})}),Object(b.jsx)("input",{className:j.a["SearchForm-input"],type:"text",autoComplete:"off",autoFocus:!0,name:"imageName",value:c,placeholder:"Search images and photos",onChange:function(e){return o(e.currentTarget.value.toLowerCase())}})]})})},h=a(14),g=a(9),f=a.n(g),O=a(12),p=a.n(O);var _=function(e){var t=e.webformatURL,a=e.toggleModal,n=e.largeImageURL;return Object(b.jsx)("li",{className:p.a.ImageGalleryItem,children:Object(b.jsx)("img",{src:t,alt:t,onClick:function(){return a(n)},className:p.a["ImageGalleryItem-image"]})})},x=a(15),v=a.n(x);var S=function(e){var t=e.onLoadMore;return Object(b.jsx)("button",{type:"button",className:v.a.Button,onClick:function(){return t()},children:"Load more"})};var I=function(e,t){var a="".concat("https://pixabay.com/api/","?key=").concat("22969928-aad90fecb00099c81964f1030","&per_page=12&page=").concat(t,"&q=").concat(e,"&image_type=photo");return fetch(a).then((function(e){return e.ok?e.json():Promise.reject(new Error("Something went wrong "))})).then((function(e){return 0===e.hits.length?Promise.reject(new Error("No images with this name were found. Please enter a different name. ")):e.hits}))},y=a(16),w=a.n(y),N=(a(45),a(17)),L=a.n(N);var F=function(){return Object(b.jsxs)("div",{className:L.a.LoaderBox,children:[Object(b.jsx)(w.a,{type:"Rings",color:"#00BFFF",height:100,width:100,timeout:3e3}),"Loading..."]})};var E=function(e){var t=e.imageName,a=e.toggleModal,r=Object(n.useState)([]),c=Object(i.a)(r,2),o=c[0],l=c[1],s=Object(n.useState)(1),u=Object(i.a)(s,2),m=u[0],j=u[1],d=Object(n.useState)("idle"),g=Object(i.a)(d,2),O=g[0],p=g[1],x=Object(n.useState)(null),v=Object(i.a)(x,2),y=v[0],w=v[1],N=Object(n.useState)(!1),L=Object(i.a)(N,2),E=L[0],G=L[1];Object(n.useEffect)((function(){""!==t&&(j(1),p("pending"),I(t,1).then((function(e){M(e),l(e),p("resolved")})).catch((function(e){w(e),p("rejected")})))}),[t]),Object(n.useEffect)((function(){""!==t&&m>1&&(p("pending"),I(t,m).then((function(e){M(e),l((function(t){return[].concat(Object(h.a)(t),Object(h.a)(e))})),p("resolved")})).then((function(){return window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){w(e),p("rejected")})))}),[m]);var M=function(e){e.length<12?G(!1):G(!0)};return"idle"===O?Object(b.jsx)("div",{className:f.a.text,children:"Enter image name."}):"pending"===O?Object(b.jsx)(F,{}):"rejected"===O?Object(b.jsx)("div",{className:f.a.text,children:y.message}):"resolved"===O?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("ul",{className:f.a.ImageGallery,children:o.map((function(e,t){return Object(b.jsx)(_,{webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,toggleModal:a},t)}))}),E&&Object(b.jsx)(S,{onLoadMore:function(){j((function(e){return e+1}))}})]}):void 0},G=a(13),M=a.n(G),k=document.querySelector("#modal-root");var C=function(e){var t=e.onClose,a=e.children;return Object(n.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]),Object(c.createPortal)(Object(b.jsx)("div",{className:M.a.Overlay,onClick:function(e){e.currentTarget===e.target&&t()},children:Object(b.jsx)("div",{className:M.a.Modal,children:a})}),k)};var B=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),o=Object(i.a)(c,2),s=o[0],m=o[1],j=Object(n.useState)(""),h=Object(i.a)(j,2),g=h[0],f=h[1],O=function(e){m(!s),f(e)};return Object(b.jsxs)("div",{className:u.a.App,children:[Object(b.jsx)(d,{onSubmit:function(e){r(e)}}),Object(b.jsx)(E,{imageName:a,toggleModal:O}),Object(b.jsx)(l.a,{autoClose:3e3,theme:"colored"}),s&&Object(b.jsx)(C,{onClose:O,children:Object(b.jsx)("img",{src:g,alt:g,className:u.a.modalImage})})]})};o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(B,{})}),document.getElementById("root"))},5:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__DjWH3",SearchForm:"Searchbar_SearchForm__1ac2l","SearchForm-button":"Searchbar_SearchForm-button__3u-rY","SearchForm-button-label":"Searchbar_SearchForm-button-label__2bzU3","SearchForm-input":"Searchbar_SearchForm-input__j6qzO"}},9:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__DncjJ",text:"ImageGallery_text__3So6w"}}},[[46,1,2]]]);
//# sourceMappingURL=main.26e6b486.chunk.js.map